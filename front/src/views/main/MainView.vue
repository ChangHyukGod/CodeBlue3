<template>
  <div class="container my-5">
    <!-- ë°°ë„ˆ(ìºëŸ¬ì…€) -->
    <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleControls" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleControls" data-bs-slide-to="1" aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleControls" data-bs-slide-to="2" aria-label="Slide 3"></button>
      <button type="button" data-bs-target="#carouselExampleControls" data-bs-slide-to="3" aria-label="Slide 4"></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <a href="/maindetail/164">
          <img :src="require(`@/assets/images/main/ë°°ë„ˆì œì£¼.png`)" class="d-block w-100" width="800" height="600" />
        </a>
      </div>
      <div class="carousel-item">
        <a href="/maindetail/104">
          <img :src="require(`@/assets/images/main/ë°°ë„ˆê´‘ì•ˆ.png`)" class="d-block w-100" width="800" height="600" />
        </a>
      </div>
      <div class="carousel-item">
        <a href="/coupon">
          <img :src="require(`@/assets/images/main/ë°°ë„ˆì¿ í°.png`)" class="d-block w-100" width="800" height="600" />
        </a>
      </div>
      <div class="carousel-item">
        <a href="/recommenddetail/11">
          <img :src="require(`@/assets/images/main/ë°°ë„ˆì¶”ì²œ.png`)" class="d-block w-100" width="800" height="600" />
        </a>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
  <br/>

    <!-- ë©”ë‰´ 1 : ì—°ë§íŠ¹ê°€ -->
    <div>
      <button class="btn btn-warning" style="border-radius: 10px; color: white; font-size: 21px;">2024 ì—°ë§, ë§ˆì§€ë§‰ íŠ¹ê°€</button>
      <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px; margin-bottom: 10px;">
        <span style="font-size: 18px; cursor: pointer;">ğŸ‘</span>
        <p style="margin: 0; font-size: 16px; color: #555;">
          ì•„ì§ ëŠ¦ì§€ ì•Šì•˜ì–´ìš”! ì—°ë§ì—” ì˜ˆìœ ìˆ™ì†Œì—ì„œ ë‚­ë§Œ ê°€ë“ íœ´ì‹ ì–´ë•Œìš”?
        </p>
      </div>
    </div>
    <!-- ì¶”ì²œ ì¹´ë“œ 1 -->
    <div class="row row-cols-1 row-cols-md-4 g-3">
      <div class="col">
        <div class="card h-100">
          <a href="/maindetail/104">
            <img :src="require(`@/assets/images/main/ì¶”ì²œê´‘ì•ˆ.avif`)" class="card-img-top" style="width: 100%; height: 200px; object-fit: cover;"/>
          </a>
          <div class="card-body" style="display: flex; flex-direction: column; justify-content: space-between; width: 300px;">
            <h5 class="card-title mt-2">ë‚­ë§Œê°€ë“, ì—°ì¸ê³¼ í•¨ê»˜ ì¦ê¸°ëŠ” ê´‘ì•ˆëŒ€êµ ë·°</h5>
            <p class="card-text">ë¶€ì‚°</p>
            <p class="card-text">ê´‘ì•ˆëŒ€êµ ë·°ê°€ ë³´ì´ëŠ” ìˆ™ì†Œì—ì„œ ë‚­ë§Œ í•œì” ì–´ë– ì„¸ìš”â™¡</p>
            <p class="text-primary fw-bold">70,000ì›</p>
              <div style="display: flex; justify-content: space-between">
                <a href="/maindetail/104"><button class="btn btn-primary">ë³´ëŸ¬ê°€ê¸°</button></a>
                <a href="/recommenddetail/12"><button class="btn btn-primary">ê·¼ì²˜ ì—¬í–‰ì§€</button></a>
              </div>
          </div>
        </div>
      </div>
      <!-- ì¶”ì²œ ì¹´ë“œ 2 -->
      <div class="col">
        <div class="card h-100">
          <a href="/maindetail/164">
            <img :src="require(`@/assets/images/main/ì¶”ì²œì œì£¼.avif`)" class="card-img-top" style="width: 100%; height: 200px; object-fit: cover;"/>
          </a>
          <div class="card-body" style="display: flex; flex-direction: column; justify-content: space-between; width: 300px;">
            <h5 class="card-title mt-2">ì˜¬ ê²¨ìš¸, ì œì£¼ ì–´ë•Œ~?</h5>
            <p class="card-text">ì œì£¼</p>
            <p class="card-text">ì‹œê³¨ê°¬ì„± ê°€ë“, í•œì˜¥ìˆ™ì†Œ</p>
            <p class="text-primary fw-bold">185,400ì›</p>
              <!-- ìƒì„¸í˜ì´ì§€ ì£¼ì†Œì°½ í•˜ë“œì½”ë”© ì˜ˆì • -->
              <div style="display: flex; justify-content: space-between">
                <a href="/maindetail/164"><button class="btn btn-primary">ë³´ëŸ¬ê°€ê¸°</button></a>
                <a href="/recommenddetail/12"><button class="btn btn-primary">ê·¼ì²˜ ì—¬í–‰ì§€</button></a>
              </div>
          </div>
        </div>
      </div>
      <!-- ì¶”ì²œ ì¹´ë“œ 3 -->
      <div class="col">
        <div class="card h-100">
          <a href="/maindetail/165">
            <img :src="require(`@/assets/images/main/ì¶”ì²œí”„ë‘ìŠ¤.avif`)" class="card-img-top" style="width: 100%; height: 200px; object-fit: cover;"/>
          </a>
          <div class="card-body" style="display: flex; flex-direction: column; justify-content: space-between; width: 300px;">
            <h5 class="card-title mt-2">ìœ ëŸ½ì˜ ë¬¸í™” ì¤‘ì‹¬ì§€, í”„ë‘ìŠ¤ì—ì„œ í•˜ë£¨</h5>
            <p class="card-text">í”„ë‘ìŠ¤</p>
            <p class="card-text">í”„ë‘ìŠ¤ì—ì„œ ì¦ê¸°ëŠ” ì§€ì¤‘í•´ ë°”ë‹¤</p>
            <p class="text-primary fw-bold">211,040ì›</p>
              <!-- ìƒì„¸í˜ì´ì§€ ì£¼ì†Œì°½ í•˜ë“œì½”ë”© ì˜ˆì • -->
              <div style="display: flex; justify-content: space-between">
                <a href="/maindetail/165"><button class="btn btn-primary">ë³´ëŸ¬ê°€ê¸°</button></a>
                <a href="/recommenddetail/12"><button class="btn btn-primary">ê·¼ì²˜ ì—¬í–‰ì§€</button></a>
              </div>
          </div>
        </div>
      </div>
      <!-- ì¶”ì²œ ì¹´ë“œ 4 -->
      <div class="col">
        <div class="card h-100">
          <a href="/maindetail/169">
            <img :src="require(`@/assets/images/main/ì¶”ì²œí›—ì¹´ì´ë„.avif`)" class="card-img-top" style="width: 100%; height: 200px; object-fit: cover;"/>
          </a>
          <div class="card-body" style="display: flex; flex-direction: column; justify-content: space-between; width: 300px;">
            <h5 class="card-title mt-2">ê²¨ìš¸ì™•êµ­, ìŠ¤í‚¤íƒ€ê³  ì¦ê¸°ëŠ” í›—ì¹´ì´ë„</h5>
            <p class="card-text">í›—ì¹´ì´ë„</p>
            <p class="card-text">ìœ ëª…í•œ ìŠ¤í‚¤ë¦¬ì¡°íŠ¸ ìœˆì €ìŠ¤ë…¸ìš° ë¹Œë¦¬ì§€ì—ì„œ 15ë¶„ ê±°ë¦¬</p>
            <p class="text-primary fw-bold">152,800ì›</p>
              <!-- ìƒì„¸í˜ì´ì§€ ì£¼ì†Œì°½ í•˜ë“œì½”ë”© ì˜ˆì • -->
              <div style="display: flex; justify-content: space-between">
                <a href="/maindetail/169"><button class="btn btn-primary">ë³´ëŸ¬ê°€ê¸°</button></a>
                <a href="/recommenddetail/12"><button class="btn btn-primary">ê·¼ì²˜ ì—¬í–‰ì§€</button></a>
              </div>
          </div>
        </div>
      </div>
    </div>  <!-- ì—°ë§íŠ¹ê°€ ë‹«ëŠ”íƒœê·¸ -->
    <br/>

    <!-- ë©”ë‰´ 2 : ìˆ™ì†Œ ì „ì²´ -->
    <div>
      <button class="btn btn-warning" style="border-radius: 10px; color: white; font-size: 21px;">ìµœë‹¤ ìˆ™ì†Œ ë³´ìœ </button>
      <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px; margin-bottom: 10px;">
        <span style="font-size: 18px; cursor: pointer;">ğŸ‘</span>
        <p style="margin: 0; font-size: 16px; color: #555;">
          ì—¬í–‰ ì „ì—ë„, ì—¬í–‰ ì¤‘ì—ë„ ì–¸ì œ ì–´ë””ì„œë“  ì˜ˆì•½OK
        </p>
      </div>
    </div>

    <!-- í•„í„° -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div class="d-flex  mb-4">
        <button class="btn btn-outline-secondary mx-2" @click="getreset()">ì „ì²´ë³´ê¸°</button>
        <button class="btn btn-outline-secondary mx-2" @click="getAll('ì¸ê¸°ê¸‰ìƒìŠ¹')">ì¸ê¸°ê¸‰ìƒìŠ¹</button>
        <button class="btn btn-outline-secondary mx-2" @click="getAll('êµí†µí¸ì˜')">êµí†µí¸ì˜</button>
        <button class="btn btn-outline-secondary mx-2" @click="getAll('ë°”ë‹¤')"> í•´ë³€ê°€ê·¼ì²˜</button>
        <button class="btn btn-outline-secondary mx-2" @click="getAll('ì‚°')">ìì—°ì¹œí™”ì </button>    
      </div>
      <div class="d-flex mb-2">    
        <button class="btn btn-outline-secondary dropdown-toggle form-control me-2"
        type="button"
        id="dropdownMenuButton"
        data-bs-toggle="dropdown"
        aria-expanded="false">{{ searchKeyword || "ì—¬í–‰ì˜ ëª¨ë“  ê²ƒ" }}</button>
        <ul class="dropdown-menu w-10" aria-labelledby="dropdownMenuButton">
          <li>
            <button class="dropdown-item" v-for="keyword in keywords" :key="keyword" @click="selectKeyword(keyword)">{{ keyword }}</button>
          </li>
        </ul>
      <button class="btn btn-outline-warning search_glass" type="button" @click="getAll()">
        <i class="bi bi-search"></i>
      </button>
      </div>
    </div>


    <!-- ìƒí’ˆ ì¹´ë“œ 2 -->
    <div class="row row-cols-1 row-cols-md-4 g-4">
      <div class="col" v-for="(data, index) in mains" :key="index">
        <div class="card h-100">
          <router-link :to="'/maindetail/' + data.tourId">
            <img :src="data.tourFileUrl" class="card-img-top" style="width: 100%; height: 200px; object-fit: cover;"/>
          </router-link>
          <div class="card-body" style="display: flex; flex-direction: column; justify-content: space-between; width: 300px;">
            <h5 class="card-title mt-2">{{ data.name }}</h5>
            <p class="card-text">{{ data.location }}</p>
            <p class="card-text">{{ data.description }}</p>
            <p class="text-primary fw-bold">{{ data.price }}</p>
            <div style="display: flex; justify-content: space-between">
              <router-link :to="'/maindetail/' + data.tourId">
                <button class="btn btn-primary">ë³´ëŸ¬ê°€ê¸°</button>
              </router-link>
              <router-link :to="'/mainupdate/' + data.tourId">
                <button class="btn btn-primary" v-if="userRole === 'ROLE_ADMIN'">ìˆ˜ì •/ì‚­ì œ</button>
              </router-link>
            </div>
          </div>
        </div> 
      </div> <!-- ì¹´ë“œ ë‹«ëŠ”íƒœê·¸ -->
    </div>
    <br/>

    <!-- ë©”ë‰´ 3 : ì¶”ì²œ/ì¿ í°/ë¦¬ë·°/faq ì´ë™ ì¹´ë“œ -->
    <div>
      <button class="btn btn-warning" style="border-radius: 10px; color: white; font-size: 21px;">â˜†ì¶”ì²œ ëª¨ìŒì§‘â˜†</button>
      <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px; margin-bottom: 10px;">
        <span style="font-size: 18px; cursor: pointer;">ğŸ‘</span>
        <p style="margin: 0; font-size: 16px; color: #555;">
          ê°ì¢… ë¦¬ë·°, ìˆ™ì†Œ ê·¼ì²˜ í•«í”Œ, ì¿ í°í˜œíƒê¹Œì§€ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”~!
        </p>
      </div>
    </div>
    <div class="row row-cols-1 row-cols-md-4 g-4">
      <div class="col">
        <div class="card h-100">
          <a href="/recommend">
            <img :src="require(`@/assets/images/main/ì¶”ì²œ.png`)" class="card-img-top" style="width: 100%; height: 200px; object-fit: cover;"/>
          </a>
          <div class="card-body" style="display: flex; gap: 20px; width: 300px;">
            <a href="/recommend"><button class="btn btn-primary">ì¶”ì²œí˜ì´ì§€</button></a>
            <p style="font-size: 20px; font-style: bold;">/</p>
            <a href="/recommendgoogleview"><button class="btn btn-primary">ì—¬í–‰ì§€ê²€ìƒ‰</button></a>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card h-100">
          <a href="/coupon">
            <img :src="require(`@/assets/images/main/ì¿ í°.png`)" class="card-img-top" style="width: 100%; height: 200px; object-fit: cover;"/>
          </a>
          <div class="card-body" style="display: flex; flex-direction: column; justify-content: space-between; width: 300px;">
            <a href="/coupon"><button class="btn btn-primary">ì¿ í°/ì´ë²¤íŠ¸ ë³´ëŸ¬ê°€ê¸°</button></a>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card h-100">
          <a href="/review">
            <img :src="require(`@/assets/images/main/ë¦¬ë·°.png`)" class="card-img-top" style="width: 100%; height: 200px; object-fit: cover;"/>
          </a>
          <div class="card-body" style="display: flex; flex-direction: column; justify-content: space-between; width: 300px;">
            <a href="/review"><button class="btn btn-primary">ë¦¬ë·°ê²Œì‹œíŒ ë³´ëŸ¬ê°€ê¸°</button></a>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card h-100">
          <a href="/faq">
            <img :src="require(`@/assets/images/main/FAQ.png`)" class="card-img-top" style="width: 100%; height: 200px; object-fit: cover;"/>
          </a>
          <div class="card-body" style="display: flex; flex-direction: column; justify-content: space-between; width: 300px;">
            <a href="/faq"><button class="btn btn-primary">ê³ ê°ì„¼í„° ë³´ëŸ¬ê°€ê¸°</button></a>
          </div>
        </div>
      </div>
    </div>
  
  </div>
</template>
<script>
import MainService from "@/services/main/MainService";
export default {
  data() {
    return {
      mains: [], //ë¹ˆë°°ì—´(json)
      searchKeyword:"", // ê²€ìƒ‰ì–´
      keywords: ["êµ­ë‚´","í•´ì™¸"], //ë“œë¡­ë‹¤ìš´ í•­ëª©
      userRole: "", // ìœ ì € ê¶Œí•œ
    };
  },
  methods: {
    async getAll(view = ""){
      this.view = view;
      console.log(this.category);
      console.log(this.view);
      console.log(this.searchKeyword);
      try {
        let response = await MainService.getALLnp(this.searchKeyword,this.view);
        const { results, totalCount } = response.data;
        console.log(response.data);
        this.mains = results;
        this.totalCount = totalCount;
      } catch (error) {
        console.log(error);
      }
    },
    // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ì„ íƒ
    selectKeyword(keyword){
      this.searchKeyword = keyword;
    },
    // ì „ì²´ë³´ê¸° ë²„íŠ¼(ì „ì²´ì¡°íšŒ)
    getreset(){
      this.searchKeyword = "";
      this.getAll();
    },
  },
  mounted() {
    this.getAll();
    // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ í† í° ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    const user = localStorage.getItem("user"); // ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    if (user) {
      const parsedUser = JSON.parse(user); // JSON ë¬¸ìì—´ì„ ê°ì²´ë¡œ íŒŒì‹±
      this.userRole = parsedUser.codeName; // ê¶Œí•œ ì •ë³´ ì €ì¥
    } else {
      console.error("No user data found in localStorage.");
    }
  },
};
</script>
<style></style>