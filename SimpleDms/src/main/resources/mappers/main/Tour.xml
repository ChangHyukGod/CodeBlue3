<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.simplecoding.simpledms.mapper.main.TourMapper">
    <!-- 전체조회 : public List<?> selectTour(Criteria searchVO); -->
    <select id="selectTour" parameterType="Criteria" resultType="Tour">
        SELECT * FROM TOUR
        WHERE TOUR_ID LIKE '%'||#{searchKeyword}||'%'
        OFFSET #{pageIndex} * #{recordCountPerPage} ROWS
            FETCH NEXT #{recordCountPerPage} ROWS ONLY
    </select>

    <!-- 전체조회 _ 총건수 : public int selectTourTotCnt(Criteria searchVO); -->
    <select id="selectTourTotCnt" parameterType="Criteria" resultType="int">
        SELECT COUNT(*) FROM TOUR
        WHERE TOUR_ID LIKE '%'||#{searchKeyword}||'%'
    </select>

    <!-- 추가, 업로드 : public int insert(Tour tour);-->
    <insert id="insert" parameterType="Tour">
        INSERT INTO TOUR(TOUR_ID, NAME, LOCATION, DESCRIPTION, PRICE)
        VALUES(#{tourId}, #{name}, #{location}, #{description}, #{price})
    </insert>

    <!-- 상세조회 : public Optional<Tour> select(int tourId); -->
    <select id="select" parameterType="int" resultType="Tour">
        SELECT * FROM TOUR
        WHERE TOUR_ID = #{tourId}
    </select>
</mapper>